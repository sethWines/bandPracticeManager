<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Storage Wizard - Band Practice Manager</title>
    <meta name="app-version" content="v2.1.0">
    <link rel="stylesheet" href="./css/themes.css">
    <link rel="stylesheet" href="./css/layout.css">
    <link rel="stylesheet" href="./css/mobile-wizard.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d84315' stroke-width='2'><circle cx='12' cy='17' r='4.5'/><line x1='12' y1='12.5' x2='12' y2='2'/><line x1='9' y1='5' x2='15' y2='5'/><line x1='9' y1='8' x2='15' y2='8'/></svg>">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
            Storage Wizard
        </h1>
        
        <div class="header-controls" style="margin-left: auto;">
            <div class="nav-links">
                <a href="song-manager.html" class="nav-link">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                    </svg>
                    Songs
                </a>
                <a href="setlist-manager.html" class="nav-link">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                        <line x1="8" y1="6" x2="21" y2="6"/>
                        <line x1="8" y1="12" x2="21" y2="12"/>
                        <line x1="8" y1="18" x2="21" y2="18"/>
                        <line x1="3" y1="6" x2="3.01" y2="6"/>
                        <line x1="3" y1="12" x2="3.01" y2="12"/>
                        <line x1="3" y1="18" x2="3.01" y2="18"/>
                    </svg>
                    Setlists
                </a>
                <a href="chord-chart-editor.html" class="nav-link">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                        <path d="M9 18V5l12-2v13"/>
                        <circle cx="6" cy="18" r="3"/>
                        <circle cx="18" cy="16" r="3"/>
                    </svg>
                    Charts
                </a>
                <a href="show-time.html" class="nav-link">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                        <polygon points="5 3 19 12 5 21 5 3"/>
                    </svg>
                    Show Time
                </a>
            </div>
            <select id="themeSelector" class="theme-selector" onchange="changeTheme(this.value)">
                <option value="grey">Grey</option>
                <option value="red">Red</option>
                <option value="blue">Blue</option>
                <option value="green">Green</option>
                <option value="purple">Purple</option>
                <option value="cyan">Cyan</option>
                <option value="teal">Teal</option>
                <option value="copper">Copper</option>
                <option value="amber">Amber</option>
                <option value="pink">Pink</option>
                <option value="sunrise">Sunrise</option>
                <option value="sunset">Sunset</option>
                <option value="synthwave">Synth Wave</option>
                <option value="prism">Dark Prism</option>
            </select>
        </div>
        
        <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Open menu">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </button>
    </div>

    <!-- Mobile Command Menu (Full Screen Overlay) -->
    <div class="mobile-menu-overlay" id="mobileMenu">
        <div class="mobile-menu-header">
            <span class="mobile-menu-title">Menu</span>
            <button class="mobile-menu-close" onclick="toggleMobileMenu()" aria-label="Close menu">‚úï</button>
        </div>
        <div class="mobile-menu-content">
            <!-- Navigation Section -->
            <div class="mobile-menu-section">
                <div class="mobile-menu-section-title">Navigate</div>
                <a href="song-manager.html" class="nav-link">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                    </svg>
                    Songs
                </a>
                <a href="setlist-manager.html" class="nav-link">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="8" y1="6" x2="21" y2="6"/>
                        <line x1="8" y1="12" x2="21" y2="12"/>
                        <line x1="8" y1="18" x2="21" y2="18"/>
                        <line x1="3" y1="6" x2="3.01" y2="6"/>
                        <line x1="3" y1="12" x2="3.01" y2="12"/>
                        <line x1="3" y1="18" x2="3.01" y2="18"/>
                    </svg>
                    Setlists
                </a>
                <a href="chord-chart-editor.html" class="nav-link">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18V5l12-2v13"/>
                        <circle cx="6" cy="18" r="3"/>
                        <circle cx="18" cy="16" r="3"/>
                    </svg>
                    Charts
                </a>
                <a href="show-time.html" class="nav-link">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="5 3 19 12 5 21 5 3"/>
                    </svg>
                    Show Time
                </a>
            </div>

            <!-- Theme Section -->
            <div class="mobile-menu-section">
                <div class="mobile-menu-section-title">Theme</div>
                <select id="mobileThemeSelector" class="theme-selector" onchange="changeTheme(this.value)">
                    <option value="grey">Grey</option>
                    <option value="red">Red</option>
                    <option value="blue">Blue</option>
                    <option value="green">Green</option>
                    <option value="purple">Purple</option>
                    <option value="cyan">Cyan</option>
                    <option value="teal">Teal</option>
                    <option value="copper">Copper</option>
                    <option value="amber">Amber</option>
                    <option value="pink">Pink</option>
                    <option value="sunrise">Sunrise</option>
                    <option value="sunset">Sunset</option>
                    <option value="synthwave">Synth Wave</option>
                    <option value="prism">Dark Prism</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Device Detection Display -->
    <div class="device-info">
        <div id="detectedDevice" style="display: flex; flex-direction: column; align-items: center; gap: 15px;">
            <div id="deviceIcon">
                <!-- Device icon will be inserted here -->
            </div>
            <div style="text-align: center;">
                <div style="font-size: 14px; color: var(--text-tertiary); margin-bottom: 5px;">Detected Device:</div>
                <div id="deviceName" style="font-size: 20px; font-weight: bold; color: var(--primary-light);">Detecting your device...</div>
            </div>
        </div>
    </div>

    <!-- Task Selection -->
    <div id="taskSelection" class="wizard-section">
        <h2 style="text-align: center; color: var(--primary-light); margin-bottom: 30px;">Choose an Operation</h2>
        
        <!-- Import Section -->
        <div class="section-group">
            <div class="section-header" onclick="toggleSection('importSection')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="17 8 12 3 7 8"/>
                    <line x1="12" y1="3" x2="12" y2="15"/>
                </svg>
                <span>Import Data</span>
                <svg class="chevron" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"/>
                </svg>
            </div>
            <div id="importSection" class="section-content" style="display: none;">
                <div class="task-card" onclick="startCSVImportWizard()">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="12" y1="18" x2="12" y2="12"/>
                        <line x1="9" y1="15" x2="15" y2="15"/>
                    </svg>
                    <h3>Import CSV File</h3>
                    <p>Import songs from CSV</p>
                </div>
                <div class="task-card" onclick="startJSONImportWizard()">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <path d="M10 12h4"/>
                        <path d="M10 16h4"/>
                    </svg>
                    <h3>Import JSON Backup</h3>
                    <p>Restore complete backup</p>
                </div>
            </div>
        </div>
        
        <!-- Export Section -->
        <div class="section-group">
            <div class="section-header" onclick="toggleSection('exportSection')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="7 10 12 15 17 10"/>
                    <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
                <span>Export Data</span>
                <svg class="chevron" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"/>
                </svg>
            </div>
            <div id="exportSection" class="section-content" style="display: none;">
                <div class="task-card" onclick="startJSONExportWizard()">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <path d="M10 12h4"/>
                        <path d="M10 16h4"/>
                    </svg>
                    <h3>Export JSON Backup</h3>
                    <p>Complete backup file</p>
                </div>
                <div class="task-card" onclick="startCSVExportWizard()">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="12" y1="12" x2="12" y2="18"/>
                        <line x1="9" y1="15" x2="15" y2="15"/>
                    </svg>
                    <h3>Export CSV File</h3>
                    <p>Export songs to CSV</p>
                </div>
            </div>
        </div>
        
        <!-- Clear Data Section -->
        <div class="section-group">
            <div class="section-header danger" onclick="confirmClearAll()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#dc2626" stroke-width="2">
                    <polyline points="3 6 5 6 21 6"/>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                    <line x1="10" y1="11" x2="10" y2="17"/>
                    <line x1="14" y1="11" x2="14" y2="17"/>
                </svg>
                <span style="color: #dc2626;">Clear All Data</span>
                <svg class="chevron" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#dc2626" stroke-width="2">
                    <polyline points="9 18 15 12 9 6"/>
                </svg>
            </div>
        </div>
    </div>

    <!-- CSV Import Wizard Steps (hidden initially) -->
    <div id="csvImportWizard" class="wizard-flow" style="display: none;">
        <div class="wizard-flow-header">
            <button onclick="backToTaskSelection()" class="btn-secondary" style="margin-bottom: 20px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                    <line x1="19" y1="12" x2="5" y2="12"/>
                    <polyline points="12 19 5 12 12 5"/>
                </svg>
                Back to Menu
            </button>
            <h2 style="color: var(--primary-light); margin-bottom: 10px;">üì• Import CSV File</h2>
            <p style="color: var(--text-tertiary); margin-bottom: 30px;">Follow these steps to import your CSV file</p>
        </div>
        <div id="csvImportSteps">
            <!-- Steps will be dynamically inserted here -->
        </div>
    </div>

    <!-- JSON Import Wizard Steps (hidden initially) -->
    <div id="jsonImportWizard" class="wizard-flow" style="display: none;">
        <div class="wizard-flow-header">
            <button onclick="backToTaskSelection()" class="btn-secondary" style="margin-bottom: 20px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                    <line x1="19" y1="12" x2="5" y2="12"/>
                    <polyline points="12 19 5 12 12 5"/>
                </svg>
                Back to Menu
            </button>
            <h2 style="color: var(--primary-light); margin-bottom: 10px;">üì¶ Import JSON Backup</h2>
            <p style="color: var(--text-tertiary); margin-bottom: 30px;">Restore your complete backup</p>
        </div>
        <div id="jsonImportSteps">
            <!-- Steps will be dynamically inserted here -->
        </div>
    </div>

    <!-- JSON Export Wizard Steps (hidden initially) -->
    <div id="jsonExportWizard" class="wizard-flow" style="display: none;">
        <div class="wizard-flow-header">
            <button onclick="backToTaskSelection()" class="btn-secondary" style="margin-bottom: 20px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                    <line x1="19" y1="12" x2="5" y2="12"/>
                    <polyline points="12 19 5 12 12 5"/>
                </svg>
                Back to Menu
            </button>
            <h2 style="color: var(--primary-light); margin-bottom: 10px;">üíæ Export JSON Backup</h2>
            <p style="color: var(--text-tertiary); margin-bottom: 30px;">Create a complete backup of all your data</p>
        </div>
        <div id="jsonExportSteps">
            <!-- Steps will be dynamically inserted here -->
        </div>
    </div>

    <!-- CSV Export Wizard Steps (hidden initially) -->
    <div id="csvExportWizard" class="wizard-flow" style="display: none;">
        <div class="wizard-flow-header">
            <button onclick="backToTaskSelection()" class="btn-secondary" style="margin-bottom: 20px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                    <line x1="19" y1="12" x2="5" y2="12"/>
                    <polyline points="12 19 5 12 12 5"/>
                </svg>
                Back to Menu
            </button>
            <h2 style="color: var(--primary-light); margin-bottom: 10px;">üìÑ Export CSV File</h2>
            <p style="color: var(--text-tertiary); margin-bottom: 30px;">Export your songs to a CSV file</p>
        </div>
        <div id="csvExportSteps">
            <!-- Steps will be dynamically inserted here -->
        </div>
    </div>

    <!-- Clear All Wizard Steps (hidden initially) -->
    <div id="clearAllWizard" class="wizard-flow" style="display: none;">
        <div class="wizard-flow-header">
            <button onclick="backToTaskSelection()" class="btn-secondary" style="margin-bottom: 20px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                    <line x1="19" y1="12" x2="5" y2="12"/>
                    <polyline points="12 19 5 12 12 5"/>
                </svg>
                Back to Menu
            </button>
            <h2 style="color: #dc2626; margin-bottom: 10px;">‚ö†Ô∏è Clear All Data</h2>
            <p style="color: var(--text-tertiary); margin-bottom: 30px;">This will delete everything - proceed with caution!</p>
        </div>
        <div id="clearAllSteps">
            <!-- Steps will be dynamically inserted here -->
        </div>
    </div>

    <!-- Import Preview Panel -->
    <div id="importPreviewPanel" class="import-preview-panel" style="display: none;">
        <div class="preview-content">
            <h3 style="color: var(--primary-light); margin-bottom: 20px;">üìã Import Preview</h3>
            <div id="previewStats" class="preview-stats">
                <!-- Stats will be inserted here -->
            </div>
            <div class="preview-actions">
                <button onclick="confirmImportPreview()" class="btn-primary">
                    ‚úì Confirm Import
                </button>
                <button onclick="cancelImportPreview()" class="btn-secondary">
                    ‚úó Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Success Panel -->
    <div id="successPanel" class="success-panel" style="display: none;">
        <div class="success-content">
            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2" style="margin-bottom: 20px;">
                <polyline points="20 6 9 17 4 12"/>
            </svg>
            <h3 id="successTitle" style="color: var(--primary-light); margin-bottom: 10px;"></h3>
            <p id="successMessage" style="color: var(--text-secondary); margin-bottom: 30px;"></p>
            <div class="success-actions">
                <button onclick="goToSongManager()" class="btn-primary">
                    View Songs
                </button>
                <button onclick="backToTaskSelection()" class="btn-secondary">
                    Back to Menu
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification" class="notification-toast">
        <span id="notificationMessage"></span>
    </div>

    <!-- Hidden file inputs for standalone functionality -->
    <input type="file" id="csvFileInput" accept=".csv" style="display: none;">
    <input type="file" id="jsonFileInput" accept=".json" style="display: none;">

    <script src="./js/storage-wizard.js"></script>
    
    <!-- Version Management -->
    <script src="./js/version.js"></script>
</body>
</html>

