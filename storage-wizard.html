<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Storage Wizard - Band Practice Manager</title>
    <link rel="stylesheet" href="./css/themes.css">
    <link rel="stylesheet" href="./css/layout.css">
    <link rel="stylesheet" href="./css/mobile-wizard.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d84315' stroke-width='2'><circle cx='12' cy='17' r='4.5'/><line x1='12' y1='12.5' x2='12' y2='2'/><line x1='9' y1='5' x2='15' y2='5'/><line x1='9' y1='8' x2='15' y2='8'/></svg>">
</head>
<body>
    <!-- Header with back button -->
    <div class="wizard-header">
        <button onclick="goBack()" class="btn-secondary">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                <line x1="19" y1="12" x2="5" y2="12"/>
                <polyline points="12 19 5 12 12 5"/>
            </svg>
            Back to Song Manager
        </button>
        <h1 style="margin: 0; color: var(--primary-light);">üíæ Storage Wizard</h1>
    </div>

    <!-- Device Detection Display -->
    <div class="device-info">
        <div id="detectedDevice" style="display: flex; flex-direction: column; align-items: center; gap: 15px;">
            <div id="deviceIcon">
                <!-- Device icon will be inserted here -->
            </div>
            <div style="text-align: center;">
                <div style="font-size: 14px; color: var(--text-tertiary); margin-bottom: 5px;">Detected Device:</div>
                <div id="deviceName" style="font-size: 20px; font-weight: bold; color: var(--primary-light);">Detecting your device...</div>
            </div>
        </div>
    </div>

    <!-- Task Selection -->
    <div id="taskSelection" class="wizard-section">
        <h2 style="text-align: center; color: var(--primary-light); margin-bottom: 30px;">What would you like to do?</h2>
        <div class="task-cards">
            <div class="task-card" onclick="startCSVImportWizard()">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                    <polyline points="14 2 14 8 20 8"/>
                    <line x1="12" y1="18" x2="12" y2="12"/>
                    <line x1="9" y1="15" x2="15" y2="15"/>
                </svg>
                <h3>Import CSV File</h3>
                <p>Import songs from a CSV file</p>
            </div>
            <div class="task-card" onclick="startJSONImportWizard()">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="17 8 12 3 7 8"/>
                    <line x1="12" y1="3" x2="12" y2="15"/>
                </svg>
                <h3>Import JSON Backup</h3>
                <p>Restore songs, charts, and setlists from backup</p>
            </div>
            <div class="task-card" onclick="startJSONExportWizard()">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="7 10 12 15 17 10"/>
                    <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
                <h3>Export JSON Backup</h3>
                <p>Create a complete backup file</p>
            </div>
            <div class="task-card" onclick="startCSVExportWizard()">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                    <polyline points="14 2 14 8 20 8"/>
                    <line x1="12" y1="12" x2="12" y2="18"/>
                    <line x1="9" y1="15" x2="15" y2="15"/>
                </svg>
                <h3>Export CSV File</h3>
                <p>Export songs to a CSV file</p>
            </div>
            <div class="task-card" onclick="startClearAllWizard()">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#dc2626" stroke-width="2">
                    <polyline points="3 6 5 6 21 6"/>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                    <line x1="10" y1="11" x2="10" y2="17"/>
                    <line x1="14" y1="11" x2="14" y2="17"/>
                </svg>
                <h3 style="color: #dc2626;">Clear All Data</h3>
                <p>Delete all songs, charts, and setlists</p>
            </div>
        </div>
    </div>

    <!-- CSV Import Wizard Steps (hidden initially) -->
    <div id="csvImportWizard" class="wizard-flow" style="display: none;">
        <div class="wizard-flow-header">
            <button onclick="backToTaskSelection()" class="btn-secondary" style="margin-bottom: 20px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                    <line x1="19" y1="12" x2="5" y2="12"/>
                    <polyline points="12 19 5 12 12 5"/>
                </svg>
                Back to Menu
            </button>
            <h2 style="color: var(--primary-light); margin-bottom: 10px;">üì• Import CSV File</h2>
            <p style="color: var(--text-tertiary); margin-bottom: 30px;">Follow these steps to import your CSV file</p>
        </div>
        <div id="csvImportSteps">
            <!-- Steps will be dynamically inserted here -->
        </div>
    </div>

    <!-- JSON Import Wizard Steps (hidden initially) -->
    <div id="jsonImportWizard" class="wizard-flow" style="display: none;">
        <div class="wizard-flow-header">
            <button onclick="backToTaskSelection()" class="btn-secondary" style="margin-bottom: 20px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                    <line x1="19" y1="12" x2="5" y2="12"/>
                    <polyline points="12 19 5 12 12 5"/>
                </svg>
                Back to Menu
            </button>
            <h2 style="color: var(--primary-light); margin-bottom: 10px;">üì¶ Import JSON Backup</h2>
            <p style="color: var(--text-tertiary); margin-bottom: 30px;">Restore your complete backup</p>
        </div>
        <div id="jsonImportSteps">
            <!-- Steps will be dynamically inserted here -->
        </div>
    </div>

    <!-- JSON Export Wizard Steps (hidden initially) -->
    <div id="jsonExportWizard" class="wizard-flow" style="display: none;">
        <div class="wizard-flow-header">
            <button onclick="backToTaskSelection()" class="btn-secondary" style="margin-bottom: 20px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                    <line x1="19" y1="12" x2="5" y2="12"/>
                    <polyline points="12 19 5 12 12 5"/>
                </svg>
                Back to Menu
            </button>
            <h2 style="color: var(--primary-light); margin-bottom: 10px;">üíæ Export JSON Backup</h2>
            <p style="color: var(--text-tertiary); margin-bottom: 30px;">Create a complete backup of all your data</p>
        </div>
        <div id="jsonExportSteps">
            <!-- Steps will be dynamically inserted here -->
        </div>
    </div>

    <!-- CSV Export Wizard Steps (hidden initially) -->
    <div id="csvExportWizard" class="wizard-flow" style="display: none;">
        <div class="wizard-flow-header">
            <button onclick="backToTaskSelection()" class="btn-secondary" style="margin-bottom: 20px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                    <line x1="19" y1="12" x2="5" y2="12"/>
                    <polyline points="12 19 5 12 12 5"/>
                </svg>
                Back to Menu
            </button>
            <h2 style="color: var(--primary-light); margin-bottom: 10px;">üìÑ Export CSV File</h2>
            <p style="color: var(--text-tertiary); margin-bottom: 30px;">Export your songs to a CSV file</p>
        </div>
        <div id="csvExportSteps">
            <!-- Steps will be dynamically inserted here -->
        </div>
    </div>

    <!-- Clear All Wizard Steps (hidden initially) -->
    <div id="clearAllWizard" class="wizard-flow" style="display: none;">
        <div class="wizard-flow-header">
            <button onclick="backToTaskSelection()" class="btn-secondary" style="margin-bottom: 20px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                    <line x1="19" y1="12" x2="5" y2="12"/>
                    <polyline points="12 19 5 12 12 5"/>
                </svg>
                Back to Menu
            </button>
            <h2 style="color: #dc2626; margin-bottom: 10px;">‚ö†Ô∏è Clear All Data</h2>
            <p style="color: var(--text-tertiary); margin-bottom: 30px;">This will delete everything - proceed with caution!</p>
        </div>
        <div id="clearAllSteps">
            <!-- Steps will be dynamically inserted here -->
        </div>
    </div>

    <!-- Import Preview Panel -->
    <div id="importPreviewPanel" class="import-preview-panel" style="display: none;">
        <div class="preview-content">
            <h3 style="color: var(--primary-light); margin-bottom: 20px;">üìã Import Preview</h3>
            <div id="previewStats" class="preview-stats">
                <!-- Stats will be inserted here -->
            </div>
            <div class="preview-actions">
                <button onclick="confirmImportPreview()" class="btn-primary">
                    ‚úì Confirm Import
                </button>
                <button onclick="cancelImportPreview()" class="btn-secondary">
                    ‚úó Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Success Panel -->
    <div id="successPanel" class="success-panel" style="display: none;">
        <div class="success-content">
            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2" style="margin-bottom: 20px;">
                <polyline points="20 6 9 17 4 12"/>
            </svg>
            <h3 id="successTitle" style="color: var(--primary-light); margin-bottom: 10px;"></h3>
            <p id="successMessage" style="color: var(--text-secondary); margin-bottom: 30px;"></p>
            <div class="success-actions">
                <button onclick="goToSongManager()" class="btn-primary">
                    View Songs
                </button>
                <button onclick="backToTaskSelection()" class="btn-secondary">
                    Back to Menu
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification" class="notification-toast">
        <span id="notificationMessage"></span>
    </div>

    <!-- Hidden file inputs for standalone functionality -->
    <input type="file" id="csvFileInput" accept=".csv" style="display: none;">
    <input type="file" id="jsonFileInput" accept=".json" style="display: none;">

    <script src="./js/storage.js" type="module"></script>
    <script src="./js/storage-wizard.js"></script>
</body>
</html>

